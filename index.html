<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>POMOWORK | Hardware de Productividad</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Oswald:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* PALETA DE COLORES PROFESIONAL */
            --primary: #D32F2F;       
            --primary-dark: #B71C1C;
            --dark: #121212;          
            --dark-surface: #1E1E1E;  
            --light: #FFFFFF;
            --gray-bg: #F4F6F8;       
            --text-main: #212121;
            --text-muted: #5f6368;
            
            /* ESTADOS */
            --state-ready: #43A047;
            --state-work: #FF5722;
            --state-break: #1976D2;

            /* UI CONSTANTS */
            --radius: 8px;
            --shadow-card: 0 4px 6px rgba(0,0,0,0.06);
            --shadow-hover: 0 10px 20px rgba(0,0,0,0.12);
            --border-light: 1px solid #e0e0e0;
        }

        /* RESET & BASE */
        * { box-sizing: border-box; outline: none; }
        
        /* FIX FONDO: Negro para evitar rebotes de scroll blancos en móviles */
        html { overflow-y: scroll; scroll-behavior: smooth; background-color: var(--dark); }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--gray-bg);
            color: var(--text-main);
            margin: 0;
            display: flex; flex-direction: column; min-height: 100vh;
        }

        /* TIPOGRAFÍA */
        h1, h2, h3, h4, .btn { font-family: 'Oswald', sans-serif; text-transform: uppercase; letter-spacing: 0.5px; }
        p { margin-bottom: 1.2rem; color: var(--text-muted); line-height: 1.6; font-size: 0.95rem; }

        /* IMÁGENES */
        img { display: block; max-width: 100%; height: auto; border-radius: var(--radius); }

        /* --- HEADER PC --- */
        .top-header {
            background: var(--dark); color: var(--light); height: 70px; padding: 0 5%;
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); border-bottom: 3px solid var(--primary);
        }
        .nav-logo { font-size: 1.5rem; font-weight: 700; color: var(--light); text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .nav-logo span { color: var(--primary); }
        .nav-desktop { display: flex; gap: 5px; height: 100%; align-items: center; }
        
        .nav-btn {
            background: transparent; border: none; color: #bbb; cursor: pointer;
            font-family: 'Oswald', sans-serif; font-size: 0.9rem; padding: 8px 16px; border-radius: 4px;
            transition: 0.2s; display: flex; align-items: center; gap: 8px;
        }
        .nav-btn:hover { color: var(--light); background: rgba(255,255,255,0.1); }
        .nav-btn.active { background: var(--light); color: var(--dark); font-weight: 600; }
        .nav-btn.cta { background: var(--primary); color: white; }
        .nav-btn.cta:hover { background: var(--primary-dark); }

        /* --- CONTENEDOR PRINCIPAL --- */
        main { flex: 1; width: 100%; max-width: 1100px; margin: 0 auto; padding: 40px 20px; }

        .section-view { display: none; opacity: 0; animation: fadeIn 0.4s forwards; }
        .section-view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .section-title { text-align: center; font-size: 2.2rem; margin-bottom: 40px; position: relative; color: var(--dark); }
        .section-title::after { content: ''; display: block; width: 60px; height: 4px; background: var(--primary); margin: 15px auto 0; }

        /* --- TARJETAS --- */
        .card {
            background: var(--light); border-radius: var(--radius); padding: 25px;
            box-shadow: var(--shadow-card); border: var(--border-light);
            transition: 0.3s; display: flex; flex-direction: column; height: 100%;
        }
        .card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); border-color: var(--primary); }
        .grid-standard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 50px; }

        /* --- HERO --- */
        .hero { display: flex; align-items: center; gap: 40px; background: white; padding: 40px; border-radius: var(--radius); box-shadow: var(--shadow-card); margin-bottom: 50px; border-left: 5px solid var(--primary); }
        .hero-content { flex: 1; }
        .hero h1 { font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; color: var(--dark); }
        .hero h1 span { color: var(--primary); }
        .hero-img { flex: 0 0 350px; }

        .btn-primary, .btn-download {
            display: inline-flex; align-items: center; justify-content: center; gap: 10px; 
            background: var(--dark); color: white; padding: 12px 25px; 
            text-decoration: none; border-radius: 4px; font-family: 'Oswald', sans-serif;
            transition: 0.2s; cursor: pointer; border: none; font-size: 0.9rem; letter-spacing: 1px;
        }
        .btn-primary:hover, .btn-download:hover { background: var(--primary); transform: translateY(-2px); }
        
        .btn-download { width: 100%; margin-top: 15px; background: var(--dark-surface); }

        /* --- WEB APP --- */
        .app-panel { max-width: 600px; margin: 0 auto; background: var(--dark-surface); border-radius: 12px; padding: 30px; color: white; box-shadow: 0 15px 30px rgba(0,0,0,0.3); text-align: center; border: 1px solid #333; }
        .timer-display { font-family: 'Fira Code', monospace; font-size: 5rem; font-weight: 700; margin: 20px 0; color: #f0f0f0; line-height: 1; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .btn-control {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #ccc;
            padding: 15px; border-radius: 6px; cursor: pointer; transition: 0.2s; font-family: 'Oswald', sans-serif;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .btn-control:hover { background: white; color: var(--dark); }
        
        /* Estados */
        .state-ready .timer-display { color: var(--state-ready); text-shadow: 0 0 20px rgba(67, 160, 71, 0.4); }
        .state-work .timer-display { color: var(--state-work); text-shadow: 0 0 20px rgba(255, 87, 34, 0.4); }
        .state-break .timer-display { color: var(--state-break); text-shadow: 0 0 20px rgba(33, 150, 243, 0.4); }

        /* --- INGENIERÍA --- */
        .tech-frame {
            width: 100%; aspect-ratio: 16/9; overflow: hidden; border-radius: var(--radius);
            background: #eee; border: 1px solid #ddd; position: relative;
        }
        .tech-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .tech-frame:hover .tech-img { transform: scale(1.1); }
        
        /* CÓDIGO (CON SCROLL Y ESTILO DARK) */
        .code-window { background: #1e1e1e; border-radius: 6px; overflow: hidden; margin-top: 30px; box-shadow: var(--shadow-card); }
        .code-header { 
            background: #252526; padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; 
        }
        .dots-group { display: flex; gap: 6px; }
        .window-dot { width: 10px; height: 10px; border-radius: 50%; background: #666; }
        
        .btn-copy {
            background: transparent; border: 1px solid #555; color: #aaa; font-size: 0.7rem; 
            padding: 4px 10px; border-radius: 3px; cursor: pointer; font-family: 'Oswald'; transition: 0.2s;
        }
        .btn-copy:hover { border-color: white; color: white; }
        .btn-copy:active { background: #444; }

        .code-body { 
            padding: 15px; 
            font-family: 'Fira Code', monospace; 
            font-size: 0.8rem; 
            color: #d4d4d4; 
            white-space: pre; 
            line-height: 1.5;
            
            /* --- SCROLL PERSONALIZADO --- */
            overflow-x: auto; /* Scroll horizontal si hace falta */
            overflow-y: auto; /* Scroll vertical activado */
            max-height: 450px; /* ALTURA MÁXIMA PARA QUE NO OCUPE TODO */
        }

        /* DISEÑO DE LA BARRA DE SCROLL (Identidad del Sitio) */
        .code-body::-webkit-scrollbar { width: 10px; height: 10px; }
        .code-body::-webkit-scrollbar-track { background: #1e1e1e; border-left: 1px solid #333; }
        .code-body::-webkit-scrollbar-thumb { 
            background: #444; border-radius: 4px; border: 2px solid #1e1e1e; 
        }
        .code-body::-webkit-scrollbar-thumb:hover { background: var(--primary); /* ROJO AL PASAR EL MOUSE */ }

        .k { color: #569cd6; } .s { color: #ce9178; } .c { color: #6a9955; } .f { color: #dcdcaa; }

        /* --- PROCESO --- */
        .process-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .process-img-box {
            width: 100%; aspect-ratio: 4/3; overflow: hidden; background: #eee; 
            border-radius: var(--radius); border: 1px solid #eee; margin-bottom: 15px;
        }
        .process-img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        .card:hover .process-img-box img { transform: scale(1.05); }

        /* --- EQUIPO --- */
        .team-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; max-width: 1000px; margin: 0 auto; }
        .team-card { 
            width: 300px; background: white; border-radius: var(--radius); overflow: hidden; 
            box-shadow: var(--shadow-card); transition: 0.3s; text-align: center; border: var(--border-light);
        }
        .team-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); border-color: var(--primary); }
        .team-photo { width: 100%; height: 260px; object-fit: cover; background: #ddd; border-bottom: 3px solid var(--primary); border-radius: 0; }
        .team-info { padding: 20px; }
        .team-role { color: var(--primary); font-size: 0.75rem; font-weight: 700; letter-spacing: 1px; display: block; margin-bottom: 5px; }

        /* --- FOOTER --- */
        footer { 
            background: var(--dark); color: #fff; text-align: center; 
            padding: 40px 20px; 
            border-top: 4px solid var(--primary); margin-top: auto; 
        }

        /* --- BOTTOM NAV MOBILE --- */
        .bottom-nav {
            display: none; /* OCULTO EN ESCRITORIO */
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--dark); border-top: 2px solid var(--primary); z-index: 2000;
            justify-content: space-evenly; align-items: center;
            height: auto; padding-top: 15px; 
            padding-bottom: calc(15px + env(safe-area-inset-bottom));
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }
        
        .b-btn { 
            background: none; border: none; color: #666; 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: 'Oswald', sans-serif; font-size: 0.65rem; 
            cursor: pointer; transition: 0.2s; 
        }
        
        .b-btn.active { color: white; }
        .b-btn.active i { color: var(--primary); transform: translateY(-3px); }
        .b-btn i { font-size: 1.5rem; margin-bottom: 5px; transition: 0.2s; }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .nav-desktop { display: none; }
            .bottom-nav { display: flex; } /* VISIBLE SOLO EN MÓVIL */
            
            body { padding-bottom: 0; } 
            footer { padding-bottom: 130px; } /* Padding negro extra para menú */

            .hero { flex-direction: column; text-align: center; padding: 30px 20px; border-left: none; border-top: 5px solid var(--primary); }
            .hero-img { flex: auto; width: 100%; }
            .hero h1 { font-size: 2.5rem; }
            .controls { grid-template-columns: 1fr; }
            .team-card { width: 100%; max-width: 350px; }
        }
    </style>
</head>
<body>

    <header class="top-header">
        <a href="#" class="nav-logo" onclick="switchTab('home')">
            <img src="LOGO.png" alt="Logo" style="height: 55px; width: auto; display: block;">
        </a>
        <nav class="nav-desktop">
            <button class="nav-btn cta" onclick="switchTab('webapp')" id="d-webapp"><i class="fas fa-play"></i> APP ONLINE</button>
            <button class="nav-btn active" onclick="switchTab('home')" id="d-home">PROYECTO</button>
            <button class="nav-btn" onclick="switchTab('manual')" id="d-manual">MANUAL</button>
            <button class="nav-btn" onclick="switchTab('tech')" id="d-tech">INGENIERÍA</button>
            <button class="nav-btn" onclick="switchTab('process')" id="d-process">PROCESO</button>
            <button class="nav-btn" onclick="switchTab('team')" id="d-team">EQUIPO</button>
        </nav>
    </header>

    <nav class="bottom-nav">
        <button class="b-btn" onclick="switchTab('webapp')" id="m-webapp"><i class="fas fa-play-circle"></i>APP</button>
        <button class="b-btn active" onclick="switchTab('home')" id="m-home"><i class="fas fa-lightbulb"></i>INFO</button>
        <button class="b-btn" onclick="switchTab('manual')" id="m-manual"><i class="fas fa-book"></i>USO</button>
        <button class="b-btn" onclick="switchTab('tech')" id="m-tech"><i class="fas fa-microchip"></i>ING</button>
        <button class="b-btn" onclick="switchTab('team')" id="m-team"><i class="fas fa-users"></i>TEAM</button>
    </nav>

    <main>
        
        <section id="view-home" class="section-view active">
            <div class="hero">
                <div class="hero-content">
                    <h1>RECUPERA TU <br><span>ENFOQUE PROFUNDO</span></h1>
                    <p><strong>Pomowork</strong> es una solución de hardware tangible diseñada para combatir la fatiga visual. Exteriorizamos el control del tiempo mediante códigos lumínicos, eliminando las distracciones digitales.</p>
                    <div style="display:flex; gap:15px; flex-wrap:wrap;">
                        <button onclick="switchTab('webapp')" class="btn-primary"><i class="fas fa-play"></i> SIMULADOR</button>
                        <a href="#detalles" class="btn-primary" style="background:white; color:var(--dark); border:1px solid #ddd;">LEER MÁS</a>
                    </div>
                </div>
                <div class="hero-img" style="width: 100%; max-width: 350px; aspect-ratio: 1/1; overflow: hidden; border-radius: 8px;">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/poster.jpg?auto=format&fit=crop&w=600&q=80" 
                     alt="Workspace" 
                     style="width: 100%; height: 100%; object-fit: cover;">
                </div>
            </div>

            <div id="detalles" class="grid-standard">
                <div class="card">
                    <i class="fas fa-brain" style="font-size:2rem; color:var(--primary); margin-bottom:15px;"></i>
                    <h3>Carga Cognitiva</h3>
                    <p>Usar el celular como cronómetro aumenta las interrupciones. Pomowork es un dispositivo "monotarea" que ayuda al cerebro a entrar en estado de flujo rápidamente.</p>
                </div>
                <div class="card">
                    <i class="fas fa-eye" style="font-size:2rem; color:var(--primary); margin-bottom:15px;"></i>
                    <h3>Feedback Periférico</h3>
                    <p>El sistema usa luz RGB difusa para comunicar estados. Tu visión periférica capta el color sin necesidad de desenfocar la vista de tu tarea principal.</p>
                </div>
                <div class="card">
                    <i class="fas fa-globe-americas" style="font-size:2rem; color:var(--primary); margin-bottom:15px;"></i>
                    <h3>Sostenibilidad (ODS)</h3>
                    <p>Alineado con el <strong>ODS 3 (Salud)</strong> reduciendo el estrés visual y el <strong>ODS 4 (Educación)</strong> fomentando hábitos de estudio disciplinados.</p>
                </div>
            </div>
        </section>

        <section id="view-webapp" class="section-view">
            <h2 class="section-title">SIMULADOR <span style="color:var(--primary)">VIRTUAL</span></h2>
            
            <div class="app-panel" id="app-wrapper">
                <div id="status-badge" style="background:rgba(255,255,255,0.1); display:inline-block; padding:5px 15px; border-radius:20px; font-size:0.8rem;">SISTEMA EN ESPERA</div>
                
                <div class="timer-display" id="timer">25:00</div>

                <div class="controls">
                    <button class="btn-control" onclick="app.start(25, 'work')"><i class="fas fa-briefcase"></i> 25 MIN</button>
                    <button class="btn-control" onclick="app.start(20, 'work')"><i class="fas fa-fire"></i> 20 MIN</button>
                    <button class="btn-control" onclick="app.start(5, 'break')"><i class="fas fa-coffee"></i> 5 MIN</button>
                    <button class="btn-control" onclick="app.reset()" style="border-color:#666;"><i class="fas fa-undo"></i> RESET</button>
                </div>
            </div>

            <div class="grid-standard" style="margin-top:50px;">
                <div class="card" style="border-top:4px solid var(--state-ready);">
                    <h4><i class="fas fa-circle" style="color:var(--state-ready)"></i> LED VERDE</h4>
                    <p><strong>Standby:</strong> El sistema espera tu comando. Listo para iniciar.</p>
                </div>
                <div class="card" style="border-top:4px solid var(--state-work);">
                    <h4><i class="fas fa-circle" style="color:var(--state-work)"></i> LED NARANJA</h4>
                    <p><strong>Productivo:</strong> Mantén el enfoque hasta que suene la alarma.</p>
                </div>
                <div class="card" style="border-top:4px solid var(--state-break);">
                    <h4><i class="fas fa-circle" style="color:var(--state-break)"></i> LED AZUL</h4>
                    <p><strong>Descanso:</strong> Relaja la vista mirando objetos lejanos.</p>
                </div>
            </div>
        </section>

        <section id="view-manual" class="section-view">
            <h2 class="section-title">GUÍA DE USO</h2>
            <div style="max-width:800px; margin:0 auto;">
                <div class="card" style="margin-bottom:20px; flex-direction:row; align-items:center; gap:25px;">
                    <div style="font-size:3rem; font-weight:bold; color:#ddd; font-family:'Oswald';">01</div>
                    <div>
                        <h3>Encendido</h3>
                        <p style="margin:0;">Pulsa el botón central. El LED se pondrá <strong>VERDE</strong> indicando que el sistema está listo.</p>
                    </div>
                </div>
                <div class="card" style="margin-bottom:20px; flex-direction:row; align-items:center; gap:25px;">
                    <div style="font-size:3rem; font-weight:bold; color:#ddd; font-family:'Oswald';">02</div>
                    <div>
                        <h3>Selección</h3>
                        <p style="margin:0;"><strong>Botón A:</strong> Inicia 25 min (Estudio).<br><strong>Botón B:</strong> Inicia 20 min (Intensivo).</p>
                    </div>
                </div>
                <div class="card" style="margin-bottom:20px; flex-direction:row; align-items:center; gap:25px;">
                    <div style="font-size:3rem; font-weight:bold; color:#ddd; font-family:'Oswald';">03</div>
                    <div>
                        <h3>Alarma</h3>
                        <p style="margin:0;">Al terminar, sonará un beep y la luz cambiará a <strong>AZUL</strong> por 5 minutos.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="view-tech" class="section-view">
            <h2 class="section-title">DOCUMENTACIÓN TÉCNICA</h2>
            
            <div class="grid-standard">
                <div class="card">
                    <h3><i class="fas fa-microchip"></i> Diagrama Esquemático</h3>
                    <p>El diagrama detalla la arquitectura electrónica de nuestro Temporizador Pomodoro. El sistema integra tres botones físicos que permiten controlar el encendido y seleccionar los modos de tiempo, mientras que la interfaz de usuario combina una pantalla LCD para visualizar la cuenta regresiva con un indicador LED RGB.</p>
                    <div class="tech-frame">
                        <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Diagrama.jpg?auto=format&fit=crop&w=800&q=80" alt="Esquemático" class="tech-img">
                    </div>
                    <a href="diagrama.pdf" download class="btn-download"><i class="fas fa-file-pdf"></i> DESCARGAR ARCHIVO</a>
                </div>
                
                <div class="card">
                    <h3><i class="fas fa-cube"></i> Carcasa Corte Laser</h3>
                    <p>Diagrama de corte para el ensamblaje de la carcasa externa. El diseño está proyectado para ser ejecutado con corte láser en cartón microcorrugado de 1.5 mm, aprovechando el grosor del material para crear uniones firmes que albergan y aseguran los componentes del sistema sin necesidad de adhesivos complejos.</p>
                    <div class="tech-frame">
                        <img src="https://images.unsplash.com/photo-1631541909061-71e349d1f203?auto=format&fit=crop&w=800&q=80" alt="Render 3D" class="tech-img">
                    </div>
                    <a href="carcasa.stl" download class="btn-download"><i class="fas fa-cube"></i> DESCARGAR ARCHIVO</a>
                </div>
            </div>

            <h3><i class="fas fa-code"></i> Codigo Arduino IDE</h3>
            <div class="code-window">
                <div class="code-header">
                    <div class="dots-group">
                        <div class="window-dot" style="background:#ff5f56"></div>
                        <div class="window-dot" style="background:#ffbd2e"></div>
                        <div class="window-dot" style="background:#27c93f"></div>
                    </div>
                    <button class="btn-copy" onclick="copyCode()"><i class="fas fa-copy"></i> COPIAR CÓDIGO</button>
                </div>
                <div class="code-body" id="code-block">
<span class="c">#include &lt;Wire.h&gt;</span>
<span class="c">#include &lt;LiquidCrystal_I2C.h&gt;</span>

<span class="k">const int</span> BTN_POWER = 2;
<span class="k">const int</span> BTN_MODE_25 = 3;
<span class="k">const int</span> BTN_MODE_20 = 4;

<span class="k">const int</span> PIN_RED = 9;    
<span class="k">const int</span> PIN_GREEN = 10;
<span class="k">const int</span> PIN_BLUE = 11; 
<span class="k">const int</span> PIN_BUZZER = 8;

LiquidCrystal_I2C lcd(0x27, 16, 2); 

<span class="k">bool</span> sistemaEncendido = <span class="k">false</span>; 
<span class="k">int</span> estadoActual = 0;           
<span class="k">unsigned long</span> tiempoInicio = 0;
<span class="k">unsigned long</span> duracion = 0;     
<span class="k">int</span> ultimoTiempoTrabajo = 25;  

<span class="k">const unsigned long</span> TIEMPO_DESCANSO_TEST = 5000UL; 

<span class="k">unsigned long</span> tiempoPrimerClickModo = 0; 
<span class="k">bool</span> esperandoConfirmacionModo = <span class="k">false</span>; 

<span class="k">void</span> <span class="f">setup</span>() {
  <span class="f">pinMode</span>(BTN_POWER, INPUT_PULLUP);
  <span class="f">pinMode</span>(BTN_MODE_25, INPUT_PULLUP);
  <span class="f">pinMode</span>(BTN_MODE_20, INPUT_PULLUP);

  <span class="f">pinMode</span>(PIN_RED, OUTPUT);
  <span class="f">pinMode</span>(PIN_GREEN, OUTPUT);
  <span class="f">pinMode</span>(PIN_BLUE, OUTPUT);
  <span class="f">pinMode</span>(PIN_BUZZER, OUTPUT);

  lcd.init();
  lcd.backlight();
  <span class="f">apagarTodo</span>();
}

<span class="k">void</span> <span class="f">loop</span>() {
  <span class="k">if</span> (<span class="f">digitalRead</span>(BTN_POWER) == LOW) {
    <span class="f">delay</span>(50); 
    
    <span class="k">if</span> (!sistemaEncendido) {
      <span class="f">encenderSistema</span>();
      <span class="k">while</span>(<span class="f">digitalRead</span>(BTN_POWER) == LOW); 
    } 
    <span class="k">else</span> {
      <span class="k">bool</span> dobleClick = <span class="k">false</span>;
      <span class="k">unsigned long</span> tiempoEsperaClick = <span class="f">millis</span>();
      
      <span class="k">while</span>(<span class="f">digitalRead</span>(BTN_POWER) == LOW);

      <span class="k">while</span> (<span class="f">millis</span>() - tiempoEsperaClick < 400) {
        <span class="k">if</span> (<span class="f">digitalRead</span>(BTN_POWER) == LOW) {
          dobleClick = <span class="k">true</span>;
          <span class="k">while</span>(<span class="f">digitalRead</span>(BTN_POWER) == LOW); 
          <span class="k">break</span>;
        }
      }

      <span class="k">if</span> (dobleClick) {
        <span class="f">apagarTodo</span>();        
      } <span class="k">else</span> {
        <span class="f">resetearAMenu</span>();     
      }
    }
  }

  <span class="k">if</span> (!sistemaEncendido) <span class="k">return</span>;

  <span class="k">switch</span> (estadoActual) {
    <span class="k">case</span> 0: 
      <span class="f">ponerColor</span>(0, 255, 0); 
      lcd.setCursor(0, 0);
      lcd.print(<span class="s">"LISTO (TEST SEGS)"</span>);
      lcd.setCursor(0, 1);
      lcd.print(<span class="s">"BTN2:25s BTN3:20s"</span>);

      <span class="k">if</span> (<span class="f">digitalRead</span>(BTN_MODE_25) == LOW) {
        <span class="f">iniciarPomodoro</span>(25); 
      } <span class="k">else if</span> (<span class="f">digitalRead</span>(BTN_MODE_20) == LOW) {
        <span class="f">iniciarPomodoro</span>(20); 
      }
      <span class="k">break</span>;

    <span class="k">case</span> 1:
      <span class="f">ponerColor</span>(255, 165, 0); 
      <span class="f">gestionarTemporizador</span>(<span class="s">"TRABAJANDO..."</span>, 2); 
      <span class="f">verificarBotonesCambioModo</span>();
      <span class="k">break</span>;

    <span class="k">case</span> 2:
      <span class="f">ponerColor</span>(0, 0, 255); 
      <span class="f">gestionarTemporizador</span>(<span class="s">"DESCANSANDO..."</span>, 1); 
      <span class="f">verificarBotonesCambioModo</span>();
      <span class="k">break</span>;
  }
}

<span class="k">void</span> <span class="f">iniciarPomodoro</span>(<span class="k">int</span> tiempo) {
  ultimoTiempoTrabajo = tiempo; 
  duracion = tiempo * 1000UL;
  
  tiempoInicio = <span class="f">millis</span>();
  estadoActual = 1; 
  esperandoConfirmacionModo = <span class="k">false</span>;
  
  lcd.clear();
  lcd.print(<span class="s">"INICIANDO..."</span>);
  <span class="f">tone</span>(PIN_BUZZER, 1000, 200); 
  <span class="f">delay</span>(500); 
  lcd.clear();
}

<span class="k">void</span> <span class="f">gestionarTemporizador</span>(String titulo, <span class="k">int</span> siguienteEstado) {
  <span class="k">if</span> (esperandoConfirmacionModo) <span class="k">return</span>; 

  <span class="k">unsigned long</span> tiempoTranscurrido = <span class="f">millis</span>() - tiempoInicio;
  <span class="k">unsigned long</span> tiempoRestante = 0;
  
  <span class="k">if</span> (duracion > tiempoTranscurrido) {
    tiempoRestante = duracion - tiempoTranscurrido;
  }

  lcd.setCursor(0, 0);
  lcd.print(titulo);
  <span class="f">mostrarTiempo</span>(tiempoRestante);

  <span class="k">if</span> (tiempoRestante == 0) {
    <span class="f">alarmaFin</span>(); 
    
    <span class="k">if</span> (siguienteEstado == 2) { 
      duracion = TIEMPO_DESCANSO_TEST;
      tiempoInicio = <span class="f">millis</span>();
      estadoActual = 2; 
      lcd.clear();
    } 
    <span class="k">else if</span> (siguienteEstado == 1) { 
      <span class="f">iniciarPomodoro</span>(ultimoTiempoTrabajo); 
    }
  }
}

<span class="k">void</span> <span class="f">verificarBotonesCambioModo</span>() {
  <span class="k">int</span> botonPresionado = 0; 
  <span class="k">if</span> (<span class="f">digitalRead</span>(BTN_MODE_25) == LOW) botonPresionado = 25;
  <span class="k">if</span> (<span class="f">digitalRead</span>(BTN_MODE_20) == LOW) botonPresionado = 20;

  <span class="k">if</span> (botonPresionado > 0) {
    <span class="k">if</span> (esperandoConfirmacionModo && (<span class="f">millis</span>() - tiempoPrimerClickModo < 2000)) {
      <span class="f">iniciarPomodoro</span>(botonPresionado); 
    } <span class="k">else</span> {
      esperandoConfirmacionModo = <span class="k">true</span>;
      tiempoPrimerClickModo = <span class="f">millis</span>();
      lcd.clear();
      lcd.setCursor(0, 0);
      lcd.print(<span class="s">" CAMBIAR MODO? "</span>);
      lcd.setCursor(0, 1);
      lcd.print(<span class="s">" PULSA OTRA VEZ "</span>);
      <span class="f">tone</span>(PIN_BUZZER, 500, 100); 
      <span class="f">delay</span>(500); 
    }
  }

  <span class="k">if</span> (esperandoConfirmacionModo && (<span class="f">millis</span>() - tiempoPrimerClickModo >= 2000)) {
    esperandoConfirmacionModo = <span class="k">false</span>;
    lcd.clear(); 
  }
}

<span class="k">void</span> <span class="f">mostrarTiempo</span>(<span class="k">unsigned long</span> ms) {
  <span class="k">unsigned long</span> segundosTotales = ms / 1000;
  <span class="k">int</span> minutos = segundosTotales / 60;
  <span class="k">int</span> segundos = segundosTotales % 60;

  lcd.setCursor(5, 1);
  <span class="k">if</span> (minutos < 10) lcd.print(<span class="s">"0"</span>);
  lcd.print(minutos);
  lcd.print(<span class="s">":"</span>);
  <span class="k">if</span> (segundos < 10) lcd.print(<span class="s">"0"</span>);
  lcd.print(segundos);
}

<span class="k">void</span> <span class="f">ponerColor</span>(<span class="k">int</span> rojo, <span class="k">int</span> verde, <span class="k">int</span> azul) {
  <span class="f">analogWrite</span>(PIN_RED, rojo);
  <span class="f">analogWrite</span>(PIN_GREEN, verde);
  <span class="f">analogWrite</span>(PIN_BLUE, azul);
}

<span class="k">void</span> <span class="f">encenderSistema</span>() {
  sistemaEncendido = <span class="k">true</span>;
  lcd.backlight(); 
  <span class="f">ponerColor</span>(0, 255, 0);
  lcd.clear();
  lcd.print(<span class="s">"HOLA!"</span>);
  <span class="f">delay</span>(500);
  <span class="f">resetearAMenu</span>();
}

<span class="k">void</span> <span class="f">resetearAMenu</span>() {
  estadoActual = 0;
  esperandoConfirmacionModo = <span class="k">false</span>;
  lcd.clear();
  lcd.print(<span class="s">"RESETEANDO..."</span>);
  <span class="f">ponerColor</span>(0, 255, 0); 
  <span class="f">delay</span>(800);
  lcd.clear();
}

<span class="k">void</span> <span class="f">apagarTodo</span>() {
  lcd.clear();
  lcd.print(<span class="s">"APAGANDO..."</span>);
  <span class="f">delay</span>(500);
  lcd.noBacklight(); 
  <span class="f">ponerColor</span>(0, 0, 0); 
  sistemaEncendido = <span class="k">false</span>;
  lcd.clear();
}

<span class="k">void</span> <span class="f">alarmaFin</span>() {
  <span class="k">for</span>(<span class="k">int</span> i=0; i<3; i++){
    <span class="f">tone</span>(PIN_BUZZER, 2000);
    <span class="f">delay</span>(200); 
    <span class="f">noTone</span>(PIN_BUZZER);
    <span class="f">delay</span>(100);
  }
}</div>
            </div>
        </section>

        <section id="view-process" class="section-view">
            <h2 class="section-title">FASES DE DESARROLLO</h2>
            <div class="process-grid">
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://images.unsplash.com/photo-1531403009284-440f080d1e12?auto=format&fit=crop&w=600&q=80" alt="Ideación">
                    </div>
                    <h4>1. Ideación</h4>
                    <p>Definición del concepto, bocetos iniciales de la interfaz y planificación de la experiencia de usuario.</p>
                </div>
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://images.unsplash.com/photo-1555664424-778a6902201b?auto=format&fit=crop&w=600&q=80" alt="Diagramación">
                    </div>
                    <h4>2. Diagramación</h4>
                    <p>Diseño del esquema electrónico detallado y mapa de conexiones para el Arduino y componentes.</p>
                </div>
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Diagramaci%C3%B3n.png?auto=format&fit=crop&w=600&q=80" alt="Pruebas">
                    </div>
                    <h4>3. Pruebas</h4>
                    <p>Validación del código y del circuito en protoboard para asegurar la lógica de funcionamiento.</p>
                </div>
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://images.unsplash.com/photo-1615858604724-4f04c6d86026?auto=format&fit=crop&w=600&q=80" alt="Diseño de Contenedor">
                    </div>
                    <h4>4. Diseño de Contenedor</h4>
                    <p>Modelado 3D de la carcasa protectora considerando medidas exactas, ergonomía y tolerancias.</p>
                </div>
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?auto=format&fit=crop&w=600&q=80" alt="Armado">
                    </div>
                    <h4>5. Armado</h4>
                    <p>Impresión de piezas, soldadura de componentes electrónicos e integración en la estructura física.</p>
                </div>
                <div class="card">
                    <div class="process-img-box">
                        <img src="https://images.unsplash.com/photo-1517420879524-86608d20f301?auto=format&fit=crop&w=600&q=80" alt="Producto Final">
                    </div>
                    <h4>6. Producto Final</h4>
                    <p>Dispositivo completamente ensamblado, funcional y listo para su uso real.</p>
                </div>
            </div>
        </section>

        <section id="view-team" class="section-view">
            <h2 class="section-title">NUESTRO EQUIPO: GRUPO 1</h2>
            <div class="team-container">
                <div class="team-card">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Aldair.jpg?auto=format&fit=crop&w=400&q=80" class="team-photo" alt="Miembro">
                    <div class="team-info">
                        <h3>Aldair Ramos</h3>
                        <span class="team-role">DIRECCIÓN Y DISEÑO GRÁFICO</span>
                        <p class="team-desc">Implementación del hardware (diagramas y conexiones del circuito) y desarrollo el sitio web del proyecto.</p>
                    </div>
                </div>
                <div class="team-card">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Gabriela.png?auto=format&fit=crop&w=400&q=80" class="team-photo" alt="Miembro">
                    <div class="team-info">
                        <h3>Gabriela Delgadillo</h3>
                        <span class="team-role">DIRECCIÓN Y DISEÑO GRÁFICO</span>
                        <p class="team-desc">Diseño del póster y de la estructuración estética de la presentación del proyecto.</p>
                    </div>
                </div>
                <div class="team-card">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Bryan.jpg?auto=format&fit=crop&w=400&q=80" class="team-photo" alt="Miembro">
                    <div class="team-info">
                        <h3>Bryan Rodriguez</h3>
                        <span class="team-role">COMUNICACIÓN AUDIOVISUAL MULTIMEDIA</span>
                        <p class="team-desc">Integró la tecnología de Realidad Aumentada en el soporte gráfico del proyecto.</p>
                    </div>
                </div>
                <div class="team-card">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Susan.png?auto=format&fit=crop&w=400&q=80" class="team-photo" alt="Miembro">
                    <div class="team-info">
                        <h3>Susan Sierra</h3>
                        <span class="team-role">DIRECCIÓN Y DISEÑO GRÁFICO</span>
                        <p class="team-desc">Diseño técnico de la carcasa, plantillas para el corte y armado de la estructura externa del proyecto.</p>
                    </div>
                </div>
                <div class="team-card">
                    <img src="https://raw.githubusercontent.com/AldaGou/PomoWork/refs/heads/main/Isneyder.png?auto=format&fit=crop&w=400&q=80" class="team-photo" alt="Miembro">
                    <div class="team-info">
                        <h3>Isneyder Escobar</h3>
                        <span class="team-role">DIRECCIÓN Y DISEÑO GRÁFICO</span>
                        <p class="team-desc">Desarrollo de la aplicación móvil, desde la lógica de programación hasta el diseño visual de la interfaz.</p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <span style="display:block; margin-bottom:10px; font-size:1.1rem; font-family:'Oswald'"><i class="fas fa-bolt" style="color:var(--primary)"></i> PROYECTO POMOWORK 2025</span>
        <p style="margin:0; opacity:0.7; font-size:0.85rem;">Diseñado y Desarrollado por Aldair Ramos -  © Todos los derechos Reservados - PomoWork 2025</p>
    </footer>

    <script>
        function switchTab(id) {
            document.querySelectorAll('.section-view').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn, .b-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById('view-' + id).classList.add('active');
            
            const deskBtn = document.getElementById('d-' + id);
            const mobBtn = document.getElementById('m-' + id);
            if(deskBtn) deskBtn.classList.add('active');
            if(mobBtn) mobBtn.classList.add('active');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function copyCode() {
            const codeText = document.getElementById('code-block').innerText;
            navigator.clipboard.writeText(codeText).then(() => {
                const btn = document.querySelector('.btn-copy');
                const originalHtml = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> COPIADO';
                setTimeout(() => { btn.innerHTML = originalHtml; }, 2000);
            });
        }

        const app = {
            timer: null, time: 1500, audioCtx: null,
            initAudio() { if(!this.audioCtx) this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); },
            beep(type) {
                this.initAudio(); if(this.audioCtx.state === 'suspended') this.audioCtx.resume();
                const osc = this.audioCtx.createOscillator(); const gain = this.audioCtx.createGain();
                osc.connect(gain); gain.connect(this.audioCtx.destination);
                if(type === 'end') {
                    osc.frequency.setValueAtTime(800, this.audioCtx.currentTime);
                    osc.frequency.exponentialRampToValueAtTime(400, this.audioCtx.currentTime + 0.5);
                    gain.gain.setValueAtTime(0.3, this.audioCtx.currentTime);
                    osc.start(); osc.stop(this.audioCtx.currentTime + 0.5);
                } else {
                    osc.frequency.setValueAtTime(600, this.audioCtx.currentTime);
                    gain.gain.setValueAtTime(0.1, this.audioCtx.currentTime);
                    osc.start(); osc.stop(this.audioCtx.currentTime + 0.1);
                }
            },
            updateUI(mode) {
                let m = Math.floor(this.time / 60); let s = this.time % 60;
                document.getElementById('timer').innerText = `${m<10?'0'+m:m}:${s<10?'0'+s:s}`;
                const panel = document.getElementById('app-wrapper');
                const badge = document.getElementById('status-badge');
                panel.classList.remove('state-ready', 'state-work', 'state-break');
                if(mode === 'work') {
                    panel.classList.add('state-work'); badge.innerText = "TRABAJO ACTIVO"; badge.style.color = "var(--state-work)";
                } else if(mode === 'break') {
                    panel.classList.add('state-break'); badge.innerText = "TIEMPO DE DESCANSO"; badge.style.color = "var(--state-break)";
                } else {
                    panel.classList.add('state-ready'); badge.innerText = "SISTEMA EN ESPERA"; badge.style.color = "var(--state-ready)";
                }
            },
            start(min, mode) {
                clearInterval(this.timer); this.time = min * 60; this.beep('start'); this.updateUI(mode);
                this.timer = setInterval(() => {
                    if(this.time > 0) { this.time--; this.updateUI(mode); } 
                    else { clearInterval(this.timer); this.beep('end'); alert("¡Tiempo terminado!"); this.reset(); }
                }, 1000);
            },
            reset() { clearInterval(this.timer); this.time = 25 * 60; this.updateUI('ready'); }
        };
        app.updateUI('ready');
    </script>
</body>
</html>














